"use strict";(self.webpackChunklaboratorio_app=self.webpackChunklaboratorio_app||[]).push([[463],{8463:($u,Hi,M)=>{M.r(Hi);var a=M(5861),ze=M(6101),l=M(2090),b=M(9752),Ge=M(7582),qe=M(1877);M(4859);const se={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};function mr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qi=mr,_r=new l.LL("auth","Firebase",mr()),Re=new qe.Yd("@firebase/auth");function Ae(n,...e){Re.logLevel<=qe.in.ERROR&&Re.error(`Auth (${b.SDK_VERSION}): ${n}`,...e)}function y(n,...e){throw Be(n,...e)}function E(n,...e){return Be(n,...e)}function gr(n,e,t){const r=Object.assign(Object.assign({},qi()),{[e]:t});return new l.LL("auth","Firebase",r).create(e,{appName:n.name})}function K(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&y(n,"argument-error"),gr(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _r.create(n,...e)}function d(n,e,...t){if(!n)throw Be(e,...t)}function N(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ae(e),new Error(e)}function P(n,e){n||N(e)}function oe(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function vr(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class ae{constructor(e,t){this.shortDelay=e,this.longDelay=t,P(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,l.uI)()||(0,l.b$)()}get(){return function Bi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Ke(){return"http:"===vr()||"https:"===vr()}()||(0,l.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function je(n,e){P(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Ir{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void N("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void N("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void N("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ji={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Yi=new ae(3e4,6e4);function m(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function g(n,e,t,r){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,a.Z)(function*(n,e,t,r,i={}){return yr(n,i,(0,a.Z)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const u=(0,l.xO)(Object.assign({key:n.config.apiKey},o)).slice(1),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),Ir.fetch()(Er(n,n.config.apiHost,t,u),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function yr(n,e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,a.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ji),e);try{const i=new Ji(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw ue(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const u=s.ok?o.errorMessage:o.error.message,[c,h]=u.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw ue(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===c)throw ue(n,"email-already-in-use",o);if("USER_DISABLED"===c)throw ue(n,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw gr(n,p,h);y(n,p)}}catch(i){if(i instanceof l.ZR)throw i;y(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function C(n,e,t,r){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,a.Z)(function*(n,e,t,r,i={}){const s=yield g(n,e,t,r,i);return"mfaPendingCredential"in s&&y(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function Er(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?je(n.config,i):`${n.config.apiScheme}://${i}`}class Ji{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(E(this.auth,"network-request-failed")),Yi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ue(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=E(n,e,r);return i.customData._tokenResponse=t,i}function Qe(){return(Qe=(0,a.Z)(function*(n,e){return g(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function et(){return(et=(0,a.Z)(function*(n,e){return g(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function tt(){return(tt=(0,a.Z)(function*(n,e){return g(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function ce(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function nt(){return(nt=(0,a.Z)(function*(n,e=!1){const t=(0,l.m9)(n),r=yield t.getIdToken(e),i=ke(r);d(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ce(rt(i.auth_time)),issuedAtTime:ce(rt(i.iat)),expirationTime:ce(rt(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function rt(n){return 1e3*Number(n)}function ke(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Ae("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,l.tV)(t);return i?JSON.parse(i):(Ae("Failed to decode base64 JWT payload"),null)}catch(i){return Ae("Caught error parsing JWT payload as JSON",i?.toString()),null}}function O(n,e){return it.apply(this,arguments)}function it(){return(it=(0,a.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof l.ZR&&function rs({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class is{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,a.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,a.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class Tr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ce(this.lastLoginAt),this.creationTime=ce(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function le(n){return st.apply(this,arguments)}function st(){return st=(0,a.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield O(n,function es(n,e){return tt.apply(this,arguments)}(t,{idToken:r}));d(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function as(n){return n.map(e=>{var{providerId:t}=e,r=(0,Ge._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],u=function os(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),p=!!n.isAnonymous&&!(n.email&&s.passwordHash||u?.length),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new Tr(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,f)}),st.apply(this,arguments)}function ot(){return(ot=(0,a.Z)(function*(n){const e=(0,l.m9)(n);yield le(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function at(){return(at=(0,a.Z)(function*(n,e){const t=yield yr(n,{},(0,a.Z)(function*(){const r=(0,l.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=Er(n,i,"/v1/token",`key=${s}`),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Ir.fetch()(o,{method:"POST",headers:u,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class de{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){d(e.idToken,"internal-error"),d(typeof e.idToken<"u","internal-error"),d(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function ns(n){const e=ke(n);return d(e,"internal-error"),d(typeof e.exp<"u","internal-error"),d(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,a.Z)(function*(){return d(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,a.Z)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function us(n,e){return at.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new de;return r&&(d("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(d("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(d("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new de,this.toJSON())}_performRefresh(){return N("not implemented")}}function U(n,e){d("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class W{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Ge._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new is(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tr(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,a.Z)(function*(){const r=yield O(t,t.stsTokenManager.getToken(t.auth,e));return d(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function ts(n){return nt.apply(this,arguments)}(this,e)}reload(){return function ss(n){return ot.apply(this,arguments)}(this)}_assign(e){this!==e&&(d(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new W(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){d(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,a.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield le(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,a.Z)(function*(){const t=yield e.getIdToken();return yield O(e,function Xi(n,e){return Qe.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,u,c,h,p;const f=null!==(r=t.displayName)&&void 0!==r?r:void 0,_=null!==(i=t.email)&&void 0!==i?i:void 0,S=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,He=null!==(o=t.photoURL)&&void 0!==o?o:void 0,Mi=null!==(u=t.tenantId)&&void 0!==u?u:void 0,dr=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,Ui=null!==(h=t.createdAt)&&void 0!==h?h:void 0,Fi=null!==(p=t.lastLoginAt)&&void 0!==p?p:void 0,{uid:hr,emailVerified:Vi,isAnonymous:Zi,providerData:pr,stsTokenManager:Wi}=t;d(hr&&Wi,e,"internal-error");const Gu=de.fromJSON(this.name,Wi);d("string"==typeof hr,e,"internal-error"),U(f,e.name),U(_,e.name),d("boolean"==typeof Vi,e,"internal-error"),d("boolean"==typeof Zi,e,"internal-error"),U(S,e.name),U(He,e.name),U(Mi,e.name),U(dr,e.name),U(Ui,e.name),U(Fi,e.name);const fr=new W({uid:hr,auth:e,email:_,emailVerified:Vi,displayName:f,isAnonymous:Zi,photoURL:He,phoneNumber:S,tenantId:Mi,stsTokenManager:Gu,createdAt:Ui,lastLoginAt:Fi});return pr&&Array.isArray(pr)&&(fr.providerData=pr.map(qu=>Object.assign({},qu))),dr&&(fr._redirectEventId=dr),fr}static _fromIdTokenResponse(e,t,r=!1){return(0,a.Z)(function*(){const i=new de;i.updateFromServerResponse(t);const s=new W({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield le(s),s})()}}const Rr=new Map;function R(n){P(n instanceof Function,"Expected a class definition");let e=Rr.get(n);return e?(P(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Rr.set(n,e),e)}function H(n,e,t){return`firebase:${n}:${e}:${t}`}function ut(n=(0,l.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function he(n=(0,l.z$)()){return/android/i.test(n)}function J(n=(0,l.z$)()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function br(n=(0,l.z$)()){return J(n)||he(n)||function wr(n=(0,l.z$)()){return/webos/i.test(n)}(n)||function Nr(n=(0,l.z$)()){return/blackberry/i.test(n)}(n)||/windows phone/i.test(n)||function Sr(n=(0,l.z$)()){return/iemobile/i.test(n)}(n)}function v(n){return(0,l.m9)(n)}class X{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return N("not implemented")}_getIdTokenResponse(e){return N("not implemented")}_linkToIdToken(e,t){return N("not implemented")}_getReauthenticationResolver(e){return N("not implemented")}}function zr(n,e){return ft.apply(this,arguments)}function ft(){return(ft=(0,a.Z)(function*(n,e){return g(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function Pe(n,e){return vt.apply(this,arguments)}function vt(){return(vt=(0,a.Z)(function*(n,e){return g(n,"POST","/v1/accounts:sendOobCode",m(n,e))})).apply(this,arguments)}function It(){return(It=(0,a.Z)(function*(n,e){return Pe(n,e)})).apply(this,arguments)}function At(){return(At=(0,a.Z)(function*(n,e){return Pe(n,e)})).apply(this,arguments)}function L(n,e){return St.apply(this,arguments)}function St(){return(St=(0,a.Z)(function*(n,e){return C(n,"POST","/v1/accounts:signInWithIdp",m(n,e))})).apply(this,arguments)}class w extends X{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new w(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):y("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=(0,Ge._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new w(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return L(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,L(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,L(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,l.xO)(t)}return e}}function Nt(){return(Nt=(0,a.Z)(function*(n,e){return g(n,"POST","/v1/accounts:sendVerificationCode",m(n,e))})).apply(this,arguments)}function wt(){return(wt=(0,a.Z)(function*(n,e){return C(n,"POST","/v1/accounts:signInWithPhoneNumber",m(n,e))})).apply(this,arguments)}function bt(){return(bt=(0,a.Z)(function*(n,e){const t=yield C(n,"POST","/v1/accounts:signInWithPhoneNumber",m(n,e));if(t.temporaryProof)throw ue(n,"account-exists-with-different-credential",t);return t})).apply(this,arguments)}const Ls={USER_NOT_FOUND:"user-not-found"};function Ct(){return(Ct=(0,a.Z)(function*(n,e){return C(n,"POST","/v1/accounts:signInWithPhoneNumber",m(n,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Ls)})).apply(this,arguments)}class z extends X{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new z({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new z({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function Cs(n,e){return wt.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function Os(n,e){return bt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function Ds(n,e){return Ct.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return r||t||i||s?new z({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}):null}}class D{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Q extends D{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ee extends Q{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return d("providerId"in t&&"signInMethod"in t,"argument-error"),w._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return d(e.idToken||e.accessToken,"argument-error"),w._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ee.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ee.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:u}=e;if(!r&&!i&&!t&&!s||!u)return null;try{return new ee(u)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}let Gr=(()=>{class n extends Q{constructor(){super("facebook.com")}static credential(t){return w._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}return n.FACEBOOK_SIGN_IN_METHOD="facebook.com",n.PROVIDER_ID="facebook.com",n})(),qr=(()=>{class n extends Q{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return w._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})(),$r=(()=>{class n extends Q{constructor(){super("github.com")}static credential(t){return w._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch{return null}}}return n.GITHUB_SIGN_IN_METHOD="github.com",n.PROVIDER_ID="github.com",n})();class te extends X{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return L(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,L(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,L(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return r&&i&&s&&r===i?new te(r,s):null}static _create(e,t){return new te(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Br=(()=>{class n extends Q{constructor(){super("twitter.com")}static credential(t,r){return w._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=t;if(!r||!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.TWITTER_SIGN_IN_METHOD="twitter.com",n.PROVIDER_ID="twitter.com",n})();class k{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,a.Z)(function*(){const s=yield W._fromIdTokenResponse(e,r,i),o=Kr(r);return new k({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,a.Z)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=Kr(r);return new k({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function Kr(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class we extends l.ZR{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,we.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new we(e,t,r,i)}}function jr(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?we._fromErrorAndOperation(n,s,e,r):s})}function Yr(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}function xt(){return xt=(0,a.Z)(function*(n,e){const t=(0,l.m9)(n);yield be(!0,t,e);const{providerUserInfo:r}=yield function Qi(n,e){return et.apply(this,arguments)}(t.auth,{idToken:yield t.getIdToken(),deleteProvider:[e]}),i=Yr(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),yield t.auth._persistUserIfCurrent(t),t}),xt.apply(this,arguments)}function Mt(n,e){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,a.Z)(function*(n,e,t=!1){const r=yield O(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return k._forOperation(n,"link",r)})).apply(this,arguments)}function be(n,e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,a.Z)(function*(n,e,t){yield le(e);const i=!1===n?"provider-already-linked":"no-such-provider";d(Yr(e.providerData).has(t)===n,e.auth,i)})).apply(this,arguments)}function Jr(n,e){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,a.Z)(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=yield O(n,jr(r,i,e,n),t);d(s.idToken,r,"internal-error");const o=ke(s.idToken);d(o,r,"internal-error");const{sub:u}=o;return d(n.uid===u,r,"user-mismatch"),k._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&y(r,"user-mismatch"),s}})).apply(this,arguments)}function Xr(n,e){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,a.Z)(function*(n,e,t=!1){const r="signIn",i=yield jr(n,r,e),s=yield k._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function Qr(n,e){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,a.Z)(function*(n,e){const t=(0,l.m9)(n);return yield be(!1,t,e.providerId),Mt(t,e)})).apply(this,arguments)}function ei(n,e){return zt.apply(this,arguments)}function zt(){return(zt=(0,a.Z)(function*(n,e){return Jr((0,l.m9)(n),e)})).apply(this,arguments)}class me{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?$t._fromServerResponse(e,t):"totpInfo"in t?Bt._fromServerResponse(e,t):y(e,"internal-error")}}class $t extends me{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new $t(t)}}class Bt extends me{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Bt(t)}}function ne(n,e,t){var r;d((null===(r=t.url)||void 0===r?void 0:r.length)>0,n,"invalid-continue-uri"),d(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(d(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(d(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function sn(){return sn=(0,a.Z)(function*(n,e){const t=(0,l.m9)(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&ne(t.auth,i,e);const{email:s}=yield function ks(n,e){return It.apply(this,arguments)}(t.auth,i);s!==n.email&&(yield n.reload())}),sn.apply(this,arguments)}function on(){return on=(0,a.Z)(function*(n,e,t){const r=(0,l.m9)(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield n.getIdToken(),newEmail:e};t&&ne(r.auth,s,t);const{email:o}=yield function Ps(n,e){return At.apply(this,arguments)}(r.auth,s);o!==n.email&&(yield n.reload())}),on.apply(this,arguments)}function an(){return(an=(0,a.Z)(function*(n,e){return g(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function un(){return un=(0,a.Z)(function*(n,{displayName:e,photoURL:t}){if(void 0===e&&void 0===t)return;const r=(0,l.m9)(n),s={idToken:yield r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=yield O(r,function no(n,e){return an.apply(this,arguments)}(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:c})=>"password"===c);u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)}),un.apply(this,arguments)}function ni(n,e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,a.Z)(function*(n,e,t){const{auth:r}=n,s={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=yield O(n,zr(r,s));yield n._updateTokensIfNecessary(o,!0)})).apply(this,arguments)}class re{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class ri extends re{constructor(e,t,r,i){super(e,t,r),this.username=i}}class ao extends re{constructor(e,t){super(e,"facebook.com",t)}}class uo extends ri{constructor(e,t){super(e,"github.com",t,"string"==typeof t?.login?t?.login:null)}}class co extends re{constructor(e,t){super(e,"google.com",t)}}class lo extends ri{constructor(e,t,r){super(e,"twitter.com",t,r)}}function ho(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:function oo(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||"identitytoolkit#SignupNewUserResponse"===n.kind;if(!r&&n?.idToken){const o=null===(t=null===(e=ke(n.idToken))||void 0===e?void 0:e.firebase)||void 0===t?void 0:t.sign_in_provider;if(o)return new re(s,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ao(s,i);case"github.com":return new uo(s,i);case"google.com":return new co(s,i);case"twitter.com":return new lo(s,i,n.screenName||null);case"custom":case"anonymous":return new re(s,null);default:return new re(s,r,i)}}(t)}class G{constructor(e,t,r){this.type=e,this.credential=t,this.auth=r}static _fromIdtoken(e,t){return new G("enroll",e,t)}static _fromMfaPendingCredential(e){return new G("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e?.multiFactorSession){if(null!==(t=e.multiFactorSession)&&void 0!==t&&t.pendingCredential)return G._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null!==(r=e.multiFactorSession)&&void 0!==r&&r.idToken)return G._fromIdtoken(e.multiFactorSession.idToken)}return null}}class dn{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=v(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(u=>me._fromServerResponse(r,u));d(i.mfaPendingCredential,r,"internal-error");const o=G._fromMfaPendingCredential(i.mfaPendingCredential);return new dn(o,s,function(){var u=(0,a.Z)(function*(c){const h=yield c._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const p=Object.assign(Object.assign({},i),{idToken:h.idToken,refreshToken:h.refreshToken});switch(t.operationType){case"signIn":const f=yield k._fromIdTokenResponse(r,t.operationType,p);return yield r._updateCurrentUser(f.user),f;case"reauthenticate":return d(t.user,r,"internal-error"),k._forOperation(t.user,t.operationType,p);default:y(r,"internal-error")}});return function(c){return u.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,a.Z)(function*(){return t.signInResolver(e)})()}}class hn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>me._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new hn(e)}getSession(){var e=this;return(0,a.Z)(function*(){return G._fromIdtoken(yield e.user.getIdToken(),e.user.auth)})()}enroll(e,t){var r=this;return(0,a.Z)(function*(){const i=e,s=yield r.getSession(),o=yield O(r.user,i._process(r.user.auth,s,t));return yield r.user._updateTokensIfNecessary(o),r.user.reload()})()}unenroll(e){var t=this;return(0,a.Z)(function*(){const r="string"==typeof e?e:e.uid,i=yield t.user.getIdToken();try{const s=yield O(t.user,function Io(n,e){return g(n,"POST","/v2/accounts/mfaEnrollment:withdraw",m(n,e))}(t.user.auth,{idToken:i,mfaEnrollmentId:r}));t.enrolledFactors=t.enrolledFactors.filter(({uid:o})=>o!==r),yield t.user._updateTokensIfNecessary(s),yield t.user.reload()}catch(s){throw s}})()}}const pn=new WeakMap;class ii{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Le=(()=>{class n extends ii{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Eo(){const n=(0,l.z$)();return ut(n)||J(n)}()&&function hs(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=br(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((u,c,h)=>{this.notifyListeners(u,h)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const u=this.storage.getItem(i);if(t.newValue!==u)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const u=this.storage.getItem(i);!r&&this.localCache[i]===u||this.notifyListeners(i,u)},o=this.storage.getItem(i);!function ds(){return(0,l.w1)()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,a.Z)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,a.Z)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,a.Z)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),V=(()=>{class n extends ii{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();function _e(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}function I(){return window}const ci="recaptcha";class yn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=z._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function Tn(){return(Tn=(0,a.Z)(function*(n,e,t){const r=(0,l.m9)(n);yield be(!1,r,"phone");const i=yield Ue(r.auth,e,(0,l.m9)(t));return new yn(i,s=>Qr(r,s))})).apply(this,arguments)}function Rn(){return(Rn=(0,a.Z)(function*(n,e,t){const r=(0,l.m9)(n),i=yield Ue(r.auth,e,(0,l.m9)(t));return new yn(i,s=>ei(r,s))})).apply(this,arguments)}function Ue(n,e,t){return An.apply(this,arguments)}function An(){return An=(0,a.Z)(function*(n,e,t){var r;const i=yield t.verify();try{let s;if(d("string"==typeof i,n,"argument-error"),d(t.type===ci,n,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const o=s.session;if("phoneNumber"in s)return d("enroll"===o.type,n,"internal-error"),(yield function _o(n,e){return g(n,"POST","/v2/accounts/mfaEnrollment:start",m(n,e))}(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{d("signin"===o.type,n,"internal-error");const u=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return d(u,n,"missing-multi-factor-info"),(yield function Mo(n,e){return g(n,"POST","/v2/accounts/mfaSignIn:start",m(n,e))}(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:o}=yield function bs(n,e){return Nt.apply(this,arguments)}(n,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{t._reset()}}),An.apply(this,arguments)}function kn(){return(kn=(0,a.Z)(function*(n,e){yield Mt((0,l.m9)(n),e)})).apply(this,arguments)}let ve=(()=>{class n{constructor(t){this.providerId=n.PROVIDER_ID,this.auth=v(t)}verifyPhoneNumber(t,r){return Ue(this.auth,t,(0,l.m9)(r))}static credential(t,r){return z._fromVerification(t,r)}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:r,temporaryProof:i}=t;return r&&i?z._fromTokenResponse(r,i):null}}return n.PROVIDER_ID="phone",n.PHONE_SIGN_IN_METHOD="phone",n})();function q(n,e){return e?R(e):(d(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Pn extends X{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return L(e,this._buildIdpRequest())}_linkToIdToken(e,t){return L(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return L(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function na(n){return Xr(n.auth,new Pn(n),n.bypassAuthState)}function ra(n){const{auth:e,user:t}=n;return d(t,e,"internal-error"),Jr(t,new Pn(n),n.bypassAuthState)}function ia(n){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,a.Z)(function*(n){const{auth:e,user:t}=n;return d(t,e,"internal-error"),Mt(t,new Pn(n),n.bypassAuthState)})).apply(this,arguments)}class li{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,a.Z)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,a.Z)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:u,type:c}=e;if(u)return void t.reject(u);const h={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(c)(h))}catch(p){t.reject(p)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return na;case"linkViaPopup":case"linkViaRedirect":return ia;case"reauthViaPopup":case"reauthViaRedirect":return ra;default:y(this.auth,"internal-error")}}resolve(e){P(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){P(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sa=new ae(2e3,1e4);function wn(){return(wn=(0,a.Z)(function*(n,e,t){const r=(0,l.m9)(n);K(r.auth,e,D);const i=q(r.auth,t);return new Cn(r.auth,"reauthViaPopup",e,i,r).executeNotNull()})).apply(this,arguments)}function bn(){return(bn=(0,a.Z)(function*(n,e,t){const r=(0,l.m9)(n);K(r.auth,e,D);const i=q(r.auth,t);return new Cn(r.auth,"linkViaPopup",e,i,r).executeNotNull()})).apply(this,arguments)}let Cn=(()=>{class n extends li{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return(0,a.Z)(function*(){const r=yield t.execute();return d(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return(0,a.Z)(function*(){P(1===t.filter.length,"Popup operations only handle one event");const r=_e();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(E(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(E(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(E(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,sa.get())};t()}}return n.currentPopupAction=null,n})();const ca="pendingRedirect",Ie=new Map;class la extends li{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,a.Z)(function*(){let r=Ie.get(t.auth._key());if(!r){try{const s=(yield function da(n,e){return On.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Ie.set(t.auth._key(),r)}return t.bypassAuthState||Ie.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,a.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function On(){return(On=(0,a.Z)(function*(n,e){const t=hi(e),r=di(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function Ln(n,e){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(function*(n,e){return di(n)._set(hi(e),"true")})).apply(this,arguments)}function xn(n,e){Ie.set(n._key(),e)}function di(n){return R(n._redirectPersistence)}function hi(n){return H(ca,n.config.apiKey,n.name)}function ma(n,e,t){return function _a(n,e,t){return Un.apply(this,arguments)}(n,e,t)}function Un(){return(Un=(0,a.Z)(function*(n,e,t){const r=(0,l.m9)(n);K(r.auth,e,D),yield r.auth._initializationPromise;const i=q(r.auth,t);yield Ln(i,r.auth);const s=yield pi(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)})).apply(this,arguments)}function ga(n,e,t){return function va(n,e,t){return Fn.apply(this,arguments)}(n,e,t)}function Fn(){return(Fn=(0,a.Z)(function*(n,e,t){const r=(0,l.m9)(n);K(r.auth,e,D),yield r.auth._initializationPromise;const i=q(r.auth,t);yield be(!1,r,e.providerId),yield Ln(i,r.auth);const s=yield pi(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)})).apply(this,arguments)}function Fe(n,e){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,a.Z)(function*(n,e,t=!1){const r=v(n),i=q(r,e),o=yield new la(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}function pi(n){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,a.Z)(function*(n){const e=_e(`${n.uid}:::`);return n._redirectEventId=e,yield n.auth._setRedirectUser(n),yield n.auth._persistUserIfCurrent(n),e})).apply(this,arguments)}class fi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Ea(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _i(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!_i(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(E(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mi(e))}saveEventToCache(e){this.cachedEventUids.add(mi(e)),this.lastProcessedEventTime=Date.now()}}function mi(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _i({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function gi(n){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,a.Z)(function*(n,e={}){return g(n,"GET","/v1/projects",e)})).apply(this,arguments)}const Ta=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ra=/^https?/;function zn(){return(zn=(0,a.Z)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield gi(n);for(const t of e)try{if(ka(t))return}catch{}y(n,"unauthorized-domain")})).apply(this,arguments)}function ka(n){const e=oe(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!Ra.test(t))return!1;if(Ta.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Pa=new ae(3e4,6e4);function vi(){const n=I().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let Ve=null;function Na(n){return Ve=Ve||function Sa(n){return new Promise((e,t)=>{var r,i,s;function o(){vi(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vi(),t(E(n,"network-request-failed"))},timeout:Pa.get()})}if(null!==(i=null===(r=I().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=I().gapi)||void 0===s||!s.load){const u=function Mr(n){return`__${n}${Math.floor(1e6*Math.random())}`}("iframefcb");return I()[u]=()=>{gapi.load?o():t(E(n,"network-request-failed"))},function dt(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=E("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function fs(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${u}`).catch(c=>t(c))}o()}}).catch(e=>{throw Ve=null,e})}(n),Ve}const wa=new ae(5e3,15e3),ba="__/auth/iframe",Ca="emulator/auth/iframe",Oa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},La=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Da(n){const e=n.config;d(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?je(e,Ca):`https://${n.config.authDomain}/${ba}`,r={apiKey:e.apiKey,appName:n.name,v:b.SDK_VERSION},i=La.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${(0,l.xO)(r).slice(1)}`}function Gn(){return Gn=(0,a.Z)(function*(n){const e=yield Na(n),t=I().gapi;return d(t,n,"internal-error"),e.open({where:document.body,url:Da(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Oa,dontclear:!0},r=>new Promise(function(){var i=(0,a.Z)(function*(s,o){yield r.restyle({setHideOnLeave:!1});const u=E(n,"network-request-failed"),c=I().setTimeout(()=>{o(u)},wa.get());function h(){I().clearTimeout(c),s(r)}r.ping(h).then(h,()=>{o(u)})});return function(s,o){return i.apply(this,arguments)}}()))}),Gn.apply(this,arguments)}const Ma={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ua=500,Fa=600,Va="_blank",Za="http://localhost";class Ii{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wa(n,e,t,r=Ua,i=Fa){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},Ma),{width:r.toString(),height:i.toString(),top:s,left:o}),h=(0,l.z$)().toLowerCase();t&&(u=function Pr(n=(0,l.z$)()){return/crios\//i.test(n)}(h)?Va:t),function kr(n=(0,l.z$)()){return/firefox\//i.test(n)}(h)&&(e=e||Za,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[S,He])=>`${_}${S}=${He},`,"");if(function ls(n=(0,l.z$)()){var e;return J(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(h)&&"_self"!==u)return function Ha(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",u),new Ii(null);const f=window.open(e||"",u,p);d(f,n,"popup-blocked");try{f.focus()}catch{}return new Ii(f)}const za="__/auth/handler",Ga="emulator/auth/handler",qa=encodeURIComponent("fac");function qn(n,e,t,r,i,s){return $n.apply(this,arguments)}function $n(){return($n=(0,a.Z)(function*(n,e,t,r,i,s){d(n.config.authDomain,n,"auth-domain-config-required"),d(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:b.SDK_VERSION,eventId:i};if(e instanceof D){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",(0,l.xb)(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,f]of Object.entries(s||{}))o[p]=f}if(e instanceof Q){const p=e.getScopes().filter(f=>""!==f);p.length>0&&(o.scopes=p.join(","))}n.tenantId&&(o.tid=n.tenantId);const u=o;for(const p of Object.keys(u))void 0===u[p]&&delete u[p];const c=yield n._getAppCheckToken(),h=c?`#${qa}=${encodeURIComponent(c)}`:"";return`${function $a({config:n}){return n.emulator?je(n,Ga):`https://${n.authDomain}/${za}`}(n)}?${(0,l.xO)(u).slice(1)}${h}`})).apply(this,arguments)}const Bn="webStorageSupport",yi=class Ba{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V,this._completeRedirectFn=Fe,this._overrideRedirectResult=xn}_openPopup(e,t,r,i){var s=this;return(0,a.Z)(function*(){var o;P(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const u=yield qn(e,t,r,oe(),i);return Wa(e,u,_e())})()}_openRedirect(e,t,r,i){var s=this;return(0,a.Z)(function*(){return yield s._originValidation(e),function So(n){I().location.href=n}(yield qn(e,t,r,oe(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(P(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,a.Z)(function*(){const r=yield function xa(n){return Gn.apply(this,arguments)}(e),i=new fi(e);return r.register("authEvent",s=>(d(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bn,{type:Bn},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[Bn];void 0!==o&&t(!!o),y(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function Aa(n){return zn.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return br()||ut()||J()}};function $(){return window}const nu=2e3;function Yn(){return Yn=(0,a.Z)(function*(n,e,t){var r;const{BuildInfo:i}=$();P(e.sessionId,"AuthEvent did not contain a session ID");const s=yield function uu(n){return Qn.apply(this,arguments)}(e.sessionId),o={};return J()?o.ibi=i.packageName:he()?o.apn=i.packageName:y(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,qn(n,t,e.type,void 0,null!==(r=e.eventId)&&void 0!==r?r:void 0,o)}),Yn.apply(this,arguments)}function Jn(){return(Jn=(0,a.Z)(function*(n){const{BuildInfo:e}=$(),t={};J()?t.iosBundleId=e.packageName:he()?t.androidPackageName=e.packageName:y(n,"operation-not-supported-in-this-environment"),yield gi(n,t)})).apply(this,arguments)}function Xn(){return(Xn=(0,a.Z)(function*(n,e,t){const{cordova:r}=$();let i=()=>{};try{yield new Promise((s,o)=>{let u=null;function c(){var f;s();const _=null===(f=r.plugins.browsertab)||void 0===f?void 0:f.close;"function"==typeof _&&_(),"function"==typeof t?.close&&t.close()}function h(){u||(u=window.setTimeout(()=>{o(E(n,"redirect-cancelled-by-user"))},nu))}function p(){"visible"===document?.visibilityState&&h()}e.addPassiveListener(c),document.addEventListener("resume",h,!1),he()&&document.addEventListener("visibilitychange",p,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",p,!1),u&&window.clearTimeout(u)}})}finally{i()}})).apply(this,arguments)}function Qn(){return(Qn=(0,a.Z)(function*(n){const e=function cu(n){if(P(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}(n),t=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const lu=20;class du extends fi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,a.Z)(function*(){yield e.initPromise})()}}function ki(n){return er.apply(this,arguments)}function er(){return(er=(0,a.Z)(function*(n){const e=yield tr()._get(nr(n));return e&&(yield tr()._remove(nr(n))),e})).apply(this,arguments)}function mu(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<lu;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function tr(){return R(Le)}function nr(n){return H("authEvent",n.config.apiKey,n.name)}function We(n){if(!n?.includes("?"))return{};const[e,...t]=n.split("?");return(0,l.zd)(t.join("?"))}const yu=class Iu{constructor(){this._redirectPersistence=V,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fe,this._overrideRedirectResult=xn}_initialize(e){var t=this;return(0,a.Z)(function*(){const r=e._key();let i=t.eventManagers.get(r);return i||(i=new du(e),t.eventManagers.set(r,i),t.attachCallbackListeners(e,i)),i})()}_openPopup(e){y(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,r,i){var s=this;return(0,a.Z)(function*(){!function au(n){var e,t,r,i,s,o,u,c,h,p;const f=$();d("function"==typeof(null===(e=f?.universalLinks)||void 0===e?void 0:e.subscribe),n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),d(typeof(null===(t=f?.BuildInfo)||void 0===t?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),d("function"==typeof(null===(s=null===(i=null===(r=f?.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),d("function"==typeof(null===(c=null===(u=null===(o=f?.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===c?void 0:c.isAvailable),n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),d("function"==typeof(null===(p=null===(h=f?.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===p?void 0:p.open),n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const o=yield s._initialize(e);yield o.initialized(),o.resetRedirect(),function ha(){Ie.clear()}(),yield s._originValidation(e);const u=function hu(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:mu(),postBody:null,tenantId:n.tenantId,error:E(n,"no-auth-event")}}(e,r,i);yield function pu(n,e){return tr()._set(nr(n),e)}(e,u);const c=yield function ru(n,e,t){return Yn.apply(this,arguments)}(e,u,t),h=yield function su(n){const{cordova:e}=$();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,function cs(n=(0,l.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}()?"_blank":"_system","location=yes"),t(i)})})}(c);return function ou(n,e,t){return Xn.apply(this,arguments)}(e,o,h)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function iu(n){return Jn.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=$(),o=setTimeout((0,a.Z)(function*(){yield ki(e),t.onEvent(Pi())}),500),u=function(){var p=(0,a.Z)(function*(f){clearTimeout(o);const _=yield ki(e);let S=null;_&&f?.url&&(S=function fu(n,e){var t,r;const i=function gu(n){const e=We(n),t=e.link?decodeURIComponent(e.link):void 0,r=We(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return We(i).link||i||r||t||n}(e);if(i.includes("/__/auth/callback")){const s=We(i),o=s.firebaseError?function _u(n){try{return JSON.parse(n)}catch{return null}}(decodeURIComponent(s.firebaseError)):null,u=null===(r=null===(t=o?.code)||void 0===t?void 0:t.split("auth/"))||void 0===r?void 0:r[1],c=u?E(u):null;return c?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}(_,f.url)),t.onEvent(S||Pi())});return function(_){return p.apply(this,arguments)}}();typeof r<"u"&&"function"==typeof r.subscribe&&r.subscribe(null,u);const c=i,h=`${s.packageName.toLowerCase()}://`;$().handleOpenURL=function(){var p=(0,a.Z)(function*(f){if(f.toLowerCase().startsWith(h)&&u({url:f}),"function"==typeof c)try{c(f)}catch(_){console.error(_)}});return function(f){return p.apply(this,arguments)}}()}};function Pi(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:E("no-auth-event")}}const Au=1e3;function ye(){var n;return(null===(n=self?.location)||void 0===n?void 0:n.protocol)||null}function wi(){return function Si(n=(0,l.z$)()){return!("file:"!==ye()&&"ionic:"!==ye()&&"capacitor:"!==ye()||!n.toLowerCase().match(/iphone|ipad|ipod|android/))}()&&typeof document<"u"}function sr(){return(sr=(0,a.Z)(function*(){return!!wi()&&new Promise(n=>{const e=setTimeout(()=>{n(!1)},Au);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})})})).apply(this,arguments)}const bi="persistence";function or(n){return ar.apply(this,arguments)}function ar(){return(ar=(0,a.Z)(function*(n){yield n._initializationPromise;const e=function Ci(){var n;try{return(null===(n=function Cu(){return typeof window<"u"?window:null}())||void 0===n?void 0:n.sessionStorage)||null}catch{return null}}(),t=H(bi,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())})).apply(this,arguments)}const Du=d;class Z{constructor(){this.browserResolver=R(yi),this.cordovaResolver=R(yu),this.underlyingResolver=null,this._redirectPersistence=V,this._completeRedirectFn=Fe,this._overrideRedirectResult=xn}_initialize(e){var t=this;return(0,a.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,r,i){var s=this;return(0,a.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,r,i)})()}_openRedirect(e,t,r,i){var s=this;return(0,a.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,r,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return wi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Du(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,a.Z)(function*(){if(e.underlyingResolver)return;const t=yield function bu(){return sr.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function Oi(n){return n.unwrap()}function Mu(n){return Li(n)}function Li(n){const{_tokenResponse:e}=n instanceof l.ZR?n.customData:n;if(!e)return null;if(!(n instanceof l.ZR)&&"temporaryProof"in e&&"phoneNumber"in e)return ve.credentialFromResult(n);const t=e.providerId;if(!t||t===se.PASSWORD)return null;let r;switch(t){case se.GOOGLE:r=qr;break;case se.FACEBOOK:r=Gr;break;case se.GITHUB:r=$r;break;case se.TWITTER:r=Br;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:u,nonce:c}=e;return s||o||i||u?u?t.startsWith("saml.")?te._create(t,u):w._fromParams({providerId:t,signInMethod:t,pendingToken:u,idToken:i,accessToken:s}):new ee(t).credential({idToken:i,accessToken:s,rawNonce:c}):null}return n instanceof l.ZR?r.credentialFromError(n):r.credentialFromResult(n)}function T(n,e){return e.catch(t=>{throw t instanceof l.ZR&&function Uu(n,e){var t;const r=null===(t=e.customData)||void 0===t?void 0:t._tokenResponse;if("auth/multi-factor-auth-required"===e?.code)e.resolver=new Fu(n,function mo(n,e){var t;const r=(0,l.m9)(n),i=e;return d(e.customData.operationType,r,"argument-error"),d(null===(t=i.customData._serverResponse)||void 0===t?void 0:t.mfaPendingCredential,r,"argument-error"),dn._fromError(r,i)}(n,e));else if(r){const i=Li(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}(n,t),t}).then(t=>{const i=t.user;return{operationType:t.operationType,credential:Mu(t),additionalUserInfo:ho(t),user:x.getOrCreate(i)}})}function ur(n,e){return cr.apply(this,arguments)}function cr(){return(cr=(0,a.Z)(function*(n,e){const t=yield e;return{verificationId:t.verificationId,confirm:r=>T(n,t.confirm(r))}})).apply(this,arguments)}class Fu{constructor(e,t){this.resolver=t,this.auth=function xu(n){return n.wrapped()}(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return T(Oi(this.auth),this.resolver.resolveSignIn(e))}}class x{constructor(e){this._delegate=e,this.multiFactor=function yo(n){const e=(0,l.m9)(n);return pn.has(e)||pn.set(e,hn._fromUser(e)),pn.get(e)}(e)}static getOrCreate(e){return x.USER_MAP.has(e)||x.USER_MAP.set(e,new x(e)),x.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,a.Z)(function*(){return T(t.auth,Qr(t._delegate,e))})()}linkWithPhoneNumber(e,t){var r=this;return(0,a.Z)(function*(){return ur(r.auth,function Qo(n,e,t){return Tn.apply(this,arguments)}(r._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,a.Z)(function*(){return T(t.auth,function ua(n,e,t){return bn.apply(this,arguments)}(t._delegate,e,Z))})()}linkWithRedirect(e){var t=this;return(0,a.Z)(function*(){return yield or(v(t.auth)),ga(t._delegate,e,Z)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,a.Z)(function*(){return T(t.auth,ei(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return ur(this.auth,function ea(n,e,t){return Rn.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return T(this.auth,function aa(n,e,t){return wn.apply(this,arguments)}(this._delegate,e,Z))}reauthenticateWithRedirect(e){var t=this;return(0,a.Z)(function*(){return yield or(v(t.auth)),ma(t._delegate,e,Z)})()}sendEmailVerification(e){return function eo(n,e){return sn.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,a.Z)(function*(){return yield function Zs(n,e){return xt.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function io(n,e){return ni((0,l.m9)(n),e,null)}(this._delegate,e)}updatePassword(e){return function so(n,e){return ni((0,l.m9)(n),null,e)}(this._delegate,e)}updatePhoneNumber(e){return function ta(n,e){return kn.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function ro(n,e){return un.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function to(n,e,t){return on.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}x.USER_MAP=new WeakMap;class lr{constructor(){this.providerId="phone",this._delegate=new ve(Oi(ze.Z.auth()))}static credential(e,t){return ve.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}lr.PHONE_SIGN_IN_METHOD=ve.PHONE_SIGN_IN_METHOD,lr.PROVIDER_ID=ve.PROVIDER_ID}}]);